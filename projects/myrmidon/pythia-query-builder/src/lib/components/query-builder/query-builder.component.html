<div>
  <fieldset>
    <legend i18n>scope</legend>
    <!-- corpora -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title class="form-row">
          <mat-icon style="color: #b9b93f">folder_copy</mat-icon>
          corpora</mat-panel-title
        >
        <mat-panel-description>
          {{ corpora.length }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <pythia-corpus-set
        [corpora]="corpora"
        (corporaChange)="onCorporaChange($event)"
      ></pythia-corpus-set>
    </mat-expansion-panel>

    <!-- documents -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title class="form-row">
          <mat-icon style="color: orange">file_copy</mat-icon>
          <ng-container i18n>documents</ng-container>
        </mat-panel-title>
        <mat-panel-description>
          {{ docSet.entries.length }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <pythia-query-entry-set
        [attrDefinitions]="docAttrDefinitions"
        [isDocument]="true"
        [entries]="docSet.entries"
        (entrySetChange)="onDocEntrySetChange($event)"
      ></pythia-query-entry-set>
    </mat-expansion-panel>
  </fieldset>

  <!-- query clauses -->
  <pythia-query-entry-set
    [attrDefinitions]="attrDefinitions"
    [entries]="set.entries"
    (entrySetChange)="onEntrySetChange($event)"
  ></pythia-query-entry-set>

  <div style="margin-top: 8px">
    <button
      type="button"
      [disabled]="hasErrors"
      mat-flat-button
      (click)="peek()"
    >
      <mat-icon>edit_note</mat-icon> <ng-container i18n>to text</ng-container>
    </button>
    <button
      type="submit"
      [disabled]="hasErrors"
      color="primary"
      mat-flat-button
      (click)="build()"
    >
      <mat-icon>check_circle</mat-icon> <ng-container i18n>build</ng-container>
    </button>
  </div>
</div>
